<!DOCTYPE html>
<html>
  <head>
    <title>reboot router with selenium</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="../io.css">
  </head>
  <body style="font-family: serif;">

    <p> The link <a href="http://192.168.1.1" target="_blank">tplogin.cn</a> leads me to the page in Fig.1:  </p>
    <div class="row">
      <div class="column" style="width: 50%">
          <img src="media/login_router.png" width="90%">
          <figcaption style="text-align: center;">Fig.1 - Login page of router </figcaption>
      </div>
      <div class="column" style="width: 50%">        
          <img src="media/login_source.png" width="90%">
          <figcaption style="text-align: center;">Fig.2 - Source code of login page </figcaption>          
      </div>
    </div>

    <p> Its source code, as shown in Fig.2, confused me. For all I've leaned from books, in order to login the page, I need a filed to input my password, such as <code>&lt;input type="text" id="password"&gt; </code>. But all I found from the source was some javascript codes (Fig.2). I have no idea how to interact with this page through <code>selenium.webdriver</code>. So I got stuck here, for a few days.
    </p>

    <h3>see in webdriver's eye</h3>
    <p> The one day, I realized what I saw is not necessarily what the <code>webdriver</code> saw. So I thought what if I print out what is saw by the <code>webdriver</code>, is it possible to dig out new stuff from it? So I did it, and a new door revealed itself to me.
    </p>
    <figure>
      <img src="media/login_router_real.png" width='80%' >    
      <figcaption style="text-align: center;">Fig.3 - Source code of login page in webdriver's eye </figcaption>                
    </figure>    
    <p>Now I can see the <code>input</code> fields of password and submit-button. Things become easier now. </p>

    <p> The parts of logging in and switching to router setting are easy, and I began to think: well, this may be the end, writing a script for rebooting router is, after all, not that hard than I've pictured. </p>
    <p>
      Then another obstacle finds its way to hit me in the face. There are ten items in the list (Fig.4), and the <code>reboot</code> choice is listed as the ninth, invisible to the user unless you scroll down the sidebar to the end. For this reason, the <code>webdriver</code> can not locate the <code>reboot</code> item no matter how much time is waited. I searched on StackOverflow, someone suggests to use commands such as: <code> driver.execute_script("window.scrollTo(0, 120)")</code>, but it doesn't work here, for it is <emph> scrolling down the whole page, not the sidebar</emph>. Again, I got stuck. 
    </p>

    <div class="row">
      <div class="column" style="width: 50%">
          <img src="media/router_page.png" width="90%">
          <figcaption style="text-align: center;">Fig.4 - Router setting page  </figcaption>
      </div>
      <div class="column" style="width: 50%">        
          <img src="media/reload_router.png" width="90%">
          <figcaption style="text-align: center;">Fig.5 - Reload router </figcaption>          
      </div>
    </div>

    <h3> workaround </h3>
    <p> Lucky for me, there is another item (listed as the eighth of the items, below item <code>change admin password</code>) named <code>backup and reload configuration</code>, which is visible to and clickable by webdriver. I found that if I <emph>export the current configuration to</emph>  a file <code>config.bin</code>, and then reload it, the router will reboot. With this choice, I finally find a way to write a <a href="codes/wifi.py">script</a> to reboot the router with <code>selenium.webdriver</code>. 
    </p>

  </body>
</html>
